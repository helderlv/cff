{"mappings":"ACIA,MAAM,EAAiB,IACZ,IAAI,QAAQ,CAAC,EAAK,IACrB,UAAU,WAAW,CAAC,kBAAkB,CAAC,EAAK,IAgBhD,EAAgB,CAAC,EAAK,KACxB,SAAS,aAAa,CAAC,QAAQ,WAAW,CAAG,CAAC,EAAE,EAAI,KAAE,CAAC,CACvD,SAAS,aAAa,CAAC,QAAQ,WAAW,CAAG,CAAC,EAAE,EAAI,KAAE,CAAC,AAE3D,EAKM,EAAmB,AAAC,IACtB,GAAM,CAAE,aAAA,CAAY,CAAE,CAAG,EACnB,EAAa,EAAa,GAAG,CAAC,AAAC,IACjC,IAAM,EAAO,IAAI,KAAK,EAAG,IAAI,CAAC,SAAS,EACjC,EAAQ,EAAK,QAAQ,GACrB,EAAU,EAAK,UAAU,GACzB,EAAiB,AAAkB,GAAlB,EAAK,QAAQ,GAAU,IAAM,EAAQ,EACtD,EAAmB,AAAoB,GAApB,EAAK,UAAU,GAAU,IAAM,EAAU,EAClE,MAAO,CACH,UAAW,CAAC,EAAE,EAAe,CAAC,EAAE,EAAiB,CAAC,CAClD,YAAa,EAAG,EAAE,CAClB,SAAU,EAAG,QAAQ,AACzB,CACJ,GACA,MAAO,CACH,QAAS,EAAQ,OAAO,CAAC,IAAI,CAC7B,WAAA,CACJ,CACJ,EAIM,EAAc,AAAC,IACjB,IAAM,EAAQ,SAAS,aAAa,CAAC,eAC/B,EAAO,CAAC;;0BAEQ,EAAE,EAAM,SAAS,CAAC;6CACC,EAAE,EAAM,QAAQ,CAAC,EAAE,EAAE,EAAM,QAAQ,CAAC;iCAChD,EAAE,EAAM,WAAW,CAAC;;IAEjD,CAAC,CACD,EAAM,kBAAkB,CAAC,YAAa,EAE1C,EAIM,EAAoB,AAAC,IAEvB,AADuB,SAAS,aAAa,CAAC,wBAC/B,WAAW,CAAG,CACjC,EAMI,AAjEgB,CAAA,UAChB,IAAM,EAAW,MAAM,IACvB,MAAO,CACH,IAAK,EAAS,MAAM,CAAC,QAAQ,CAC7B,KAAM,EAAS,MAAM,CAAC,SAAS,AACnC,CACJ,CAAA,IA2DkB,IAAI,CAAC,AAAC,IAChB,QAAQ,GAAG,CAAC,GAEZ,MAAM,CAAC,gDAAgD,EAAE,EAAI,GAAG,CAAC,WAAW,EAAE,EAAI,IAAI,CAAC,sEAAsE,CAAC,EACzJ,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,AAAC,IACH,QAAQ,GAAG,CAAC,GAEZ,EAAc,EAAK,KAAK,CAAC,wBAAwB,CAAC,EAAE,CAAE,EAAK,KAAK,CAAC,wBAAwB,CAAC,EAAE,CAChG,GAEJ,MAAM,CAAC,4CAA4C,EAAE,EAAI,GAAG,CAAC,GAAG,EAAE,EAAI,IAAI,CAAC,aAAa,CAAC,EACpF,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,AAAC,IAEH,IAAM,EAAS,EAAK,QAAQ,CAAC,MAAM,CAAC,AAAC,GAAY,AAAiB,UAAjB,EAAQ,IAAI,CAAa,CAAC,EAAE,CAE7E,GADA,QAAQ,GAAG,CAAC,GACR,CAAC,EACD,MAAM,AAAI,MAAM,yCAOpB,OAJA,QAAQ,GAAG,CAAC,EAAO,IAAI,EACvB,EAAkB,EAAO,IAAI,EAGtB,MAAM,CAAC,sDAAsD,EAAE,EAAO,IAAI,CAAC,QAAQ,CAAC,CAC/F,GAEC,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,AAAC,IAEH,QAAQ,GAAG,CAAC,EAAiB,IAE7B,IAAK,IAAI,EAAI,EAAG,EAAI,EAAiB,GAAM,UAAU,CAAC,MAAM,CAAE,IAE1D,EAAY,EAAiB,GAAM,UAAU,CAAC,EAAE,CAGxD,GAGC,KAAK,CAAC,AAAC,IAEJ,EAAkB,EAAI,OAAO,CACjC,EAER","sources":["<anon>","app.js"],"sourcesContent":["\"use strict\";\n// getCoordinates()\n// Demande au navigateur de dÃ©tecter la position actuelle de l'utilisateur et retourne une Promise\nconst getCoordinates = ()=>{\n    return new Promise((res, rej)=>navigator.geolocation.getCurrentPosition(res, rej));\n};\n// getPosition()\n// RÃ©sout la promesse de getCoordinates et retourne un objet {lat: x, long: y}\nconst getPosition = async ()=>{\n    const position = await getCoordinates();\n    return {\n        lat: position.coords.latitude,\n        long: position.coords.longitude\n    };\n};\n// renderWeather(min, max)\n// Affiche la valeur des deux paramÃªtres dans le widget de mÃ©tÃ©o\nconst renderWeather = (min, max)=>{\n    document.querySelector(\".min\").textContent = `${min}\\xb0C`;\n    document.querySelector(\".max\").textContent = `${max}\\xb0C`;\n    return;\n};\n// parseStationData(rawData)\n// ReÃ§oit la rÃ©ponse JSON de l'API Transport/stationboard et recrache un objet\n// ne contenant que les informations pertinentes.\nconst parseStationData = (rawData)=>{\n    const { stationboard } = rawData;\n    const departures = stationboard.map((el)=>{\n        const date = new Date(el.stop.departure);\n        const hours = date.getHours();\n        const minutes = date.getMinutes();\n        const formattedHours = date.getHours() < 10 ? \"0\" + hours : hours;\n        const formattedMinutes = date.getMinutes() < 10 ? \"0\" + minutes : minutes;\n        return {\n            departure: `${formattedHours}:${formattedMinutes}`,\n            destination: el.to,\n            category: el.category\n        };\n    });\n    return {\n        station: rawData.station.name,\n        departures\n    };\n};\n// renderTrain(train)\n// Affiche une ligne de dÃ©part dans le widget CFF.\nconst renderTrain = (train)=>{\n    const board = document.querySelector(\".departures\");\n    const html = `\n    <article>\n        <div class=\"time\">${train.departure}</div>\n        <div class=\"category\" data-category=\"${train.category}\">${train.category}</div>\n        <div class=\"destination\">${train.destination}</div>\n    </article>\n    `;\n    board.insertAdjacentHTML(\"beforeend\", html);\n    return;\n};\n// renderStationName(station)\n// Affiche le mot passÃ© en paramettre dans le widget CFF. \nconst renderStationName = (station)=>{\n    const stationElement = document.querySelector(\".departures header p\");\n    stationElement.textContent = station;\n};\n// Votre code peut se trouver dans cette fonction. L'appel vers getPosition est\n// dÃ©jÃ  implÃ©mentÃ©. Si vous jetez un coup d'oeil Ã  votre console vous verrez un objet\n// contenant votre position.\nconst getDashboardInformation = ()=>{\n    getPosition().then((res)=>{\n        console.log(res);\n        fetch(`https://api.open-meteo.com/v1/forecast?latitude=${res.lat}&longitude=${res.long}&daily=apparent_temperature_max,apparent_temperature_min&timezone=auto`).then((rep)=>rep.json()).then((data)=>{\n            console.log(data);\n            renderWeather(data.daily.apparent_temperature_min[0], data.daily.apparent_temperature_max[0]);\n        });\n        fetch(`http://transport.opendata.ch/v1/locations?x=${res.lat}&y=${res.long}&type=station`).then((rep)=>rep.json()).then((data)=>{\n            const result = data.stations.filter((element)=>element.icon === \"train\")[0];\n            console.log(result);\n            if (!result) throw new Error(\"\\uD83E\\uDD72 No TRAIN STATIONS NEARBY\");\n            console.log(result.name);\n            renderStationName(result.name);\n            return fetch(`https://transport.opendata.ch/v1/stationboard?station=${result.name}&limit=5`);\n        }).then((rep)=>rep.json()).then((data)=>{\n            console.log(parseStationData(data));\n            for(let i = 0; i < parseStationData(data).departures.length; i++)renderTrain(parseStationData(data).departures[i]);\n        })//console.log(data);\n        .catch((err)=>{\n            //console.error(err);\n            renderStationName(err.message);\n        });\n    });\n};\ngetDashboardInformation();\n\n//# sourceMappingURL=index.e7f5cbca.js.map\n","\"use strict\";\n\n// getCoordinates()\n// Demande au navigateur de dÃ©tecter la position actuelle de l'utilisateur et retourne une Promise\nconst getCoordinates = () => {\n    return new Promise((res, rej) =>\n        navigator.geolocation.getCurrentPosition(res, rej)\n    );\n};\n\n// getPosition()\n// RÃ©sout la promesse de getCoordinates et retourne un objet {lat: x, long: y}\nconst getPosition = async () => {\n    const position = await getCoordinates();\n    return {\n        lat: position.coords.latitude,\n        long: position.coords.longitude\n    };\n};\n\n// renderWeather(min, max)\n// Affiche la valeur des deux paramÃªtres dans le widget de mÃ©tÃ©o\nconst renderWeather = (min, max) => {\n    document.querySelector(\".min\").textContent = `${min}Â°C`;\n    document.querySelector(\".max\").textContent = `${max}Â°C`;\n    return;\n};\n\n// parseStationData(rawData)\n// ReÃ§oit la rÃ©ponse JSON de l'API Transport/stationboard et recrache un objet\n// ne contenant que les informations pertinentes.\nconst parseStationData = (rawData) => {\n    const { stationboard } = rawData;\n    const departures = stationboard.map((el) => {\n        const date = new Date(el.stop.departure);\n        const hours = date.getHours();\n        const minutes = date.getMinutes();\n        const formattedHours = date.getHours() < 10 ? \"0\" + hours : hours;\n        const formattedMinutes = date.getMinutes() < 10 ? \"0\" + minutes : minutes;\n        return {\n            departure: `${formattedHours}:${formattedMinutes}`,\n            destination: el.to,\n            category: el.category\n        };\n    });\n    return {\n        station: rawData.station.name,\n        departures\n    };\n};\n\n// renderTrain(train)\n// Affiche une ligne de dÃ©part dans le widget CFF.\nconst renderTrain = (train) => {\n    const board = document.querySelector(\".departures\");\n    const html = `\n    <article>\n        <div class=\"time\">${train.departure}</div>\n        <div class=\"category\" data-category=\"${train.category}\">${train.category}</div>\n        <div class=\"destination\">${train.destination}</div>\n    </article>\n    `;\n    board.insertAdjacentHTML(\"beforeend\", html);\n    return;\n};\n\n// renderStationName(station)\n// Affiche le mot passÃ© en paramettre dans le widget CFF. \nconst renderStationName = (station) => {\n    const stationElement = document.querySelector(\".departures header p\");\n    stationElement.textContent = station;\n};\n\n// Votre code peut se trouver dans cette fonction. L'appel vers getPosition est\n// dÃ©jÃ  implÃ©mentÃ©. Si vous jetez un coup d'oeil Ã  votre console vous verrez un objet\n// contenant votre position.\nconst getDashboardInformation = () => {\n    getPosition().then((res) => {\n        console.log(res);\n\n        fetch(`https://api.open-meteo.com/v1/forecast?latitude=${res.lat}&longitude=${res.long}&daily=apparent_temperature_max,apparent_temperature_min&timezone=auto`)\n            .then((rep) => rep.json())\n            .then((data) => {\n                console.log(data);\n                \n                renderWeather(data.daily.apparent_temperature_min[0], data.daily.apparent_temperature_max[0])\n            })\n\n        fetch(`http://transport.opendata.ch/v1/locations?x=${res.lat}&y=${res.long}&type=station`)\n            .then((rep) => rep.json())\n            .then((data) => {\n \n                const result = data.stations.filter((element) => element.icon === \"train\")[0]\n                console.log(result);\n                if (!result) {\n                    throw new Error(\"ðŸ¥² No TRAIN STATIONS NEARBY\")\n                }\n\n                console.log(result.name);\n                renderStationName(result.name);\n\n\n                return fetch(`https://transport.opendata.ch/v1/stationboard?station=${result.name}&limit=5`)\n            })\n\n            .then((rep) => rep.json())\n            .then((data) => {\n\n                console.log(parseStationData(data));\n\n                for (let i = 0; i < parseStationData(data).departures.length; i++) {\n\n                    renderTrain(parseStationData(data).departures[i]);\n                }\n\n            })\n\n            //console.log(data);\n            .catch((err) => {\n                //console.error(err);\n                renderStationName(err.message);\n            });\n\n    })\n\n};\n\n\n\ngetDashboardInformation();\n"],"names":["getCoordinates","Promise","res","rej","navigator","geolocation","getCurrentPosition","renderWeather","min","max","document","querySelector","textContent","parseStationData","rawData","stationboard","departures","map","el","date","Date","stop","departure","hours","getHours","minutes","getMinutes","formattedHours","formattedMinutes","destination","to","category","station","name","renderTrain","train","board","html","insertAdjacentHTML","renderStationName","stationElement","getPosition","position","lat","coords","latitude","long","longitude","then","console","log","fetch","rep","json","data","daily","apparent_temperature_min","apparent_temperature_max","result","stations","filter","element","icon","Error","i","length","catch","err","message"],"version":3,"file":"index.e7f5cbca.js.map"}